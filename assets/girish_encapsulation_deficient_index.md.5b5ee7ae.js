import{_ as o,C as t,o as r,c,k as s,a,H as l,w as p,Q as n}from"./chunks/framework.5a42e701.js";const i="/assets/deficient-1.7ec5d9f4.png",q=JSON.parse('{"title":"Deficient Encapsulation","description":"","frontmatter":{},"headers":[],"relativePath":"girish/encapsulation/deficient/index.md","filePath":"girish/encapsulation/deficient/index.md"}'),y={name:"girish/encapsulation/deficient/index.md"},E=s("h1",{id:"deficient-encapsulation",tabindex:"-1"},[a("Deficient Encapsulation "),s("a",{class:"header-anchor",href:"#deficient-encapsulation","aria-label":'Permalink to "Deficient Encapsulation"'},"​")],-1),d=s("div",{class:"video-wrapper"},[s("iframe",{width:"560",height:"315",src:"https://www.youtube.com/embed/r-wphP9hQ8E",title:"YouTube video player",frameborder:"0",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture",allowfullscreen:""})],-1),u=n('<p>Di bahasa pemrograman Java, terdapat 4 level access modifier yang tentunya berperan sangat penting dalam membatasi akses data yaitu:</p><ul><li><strong><code>private</code></strong> untuk akses dalam class saja, biasanya untuk perihal detail dan implementasi class/method.</li><li><strong><code>(package)</code></strong> untuk akses dari package yang sama, biasanya untuk perihal implementasi dalam satuan package.</li><li><strong><code>protected</code></strong> untuk akses dari package yang sama dan subclass yang di-<em>extend</em>, biasanya untuk perihal yang terpakai dalam subclass.</li><li><strong><code>public</code></strong> untuk akses dari mana saja, biasanya untuk perihal yang dipakai/diakses secara luas.</li></ul><p>Penggunaan access modifier yang tidak sesuai pada konteks dapat menimbulkan smell yang fatal jika sampai terakses ataupun termodifikasi detail membernya. Smell ini terjadi ketika:</p><ul><li>Ada member yang memiliki access modifier yang permissive, terutama jika member tersebut dapat diakses oleh abstraksi mana saja (mirip <a href="./../../../martin-fowler/couplers/inappropriate-intimacy/">Inappropriate Intimacy</a>).</li><li>Member class / abstraksi / hierarki dapat mengakses field tanpa setter getter.</li></ul><p>Jika dibiarkan dapat berpotensi adanya pembocoran data yang tidak terduga.</p><h2 id="penyebab-smell" tabindex="-1">Penyebab Smell <a class="header-anchor" href="#penyebab-smell" aria-label="Permalink to &quot;Penyebab Smell&quot;">​</a></h2><ul><li><strong>Easier testability</strong>: Dimana developer ingin menguji private method dengan mengubah access modifier <code>private</code> ke <code>public</code> yang seharusnya tidak diperbolehkan dalam testing, sehingga dapat terekspos oleh class lain.</li><li><strong>Procedural thinking in object oriented context</strong>: Adanya perbedaan paham dari Procedural Programmer terhadap global variabel dimana data member diekspos untuk keperluan akses oleh multiple abstractions.</li><li><strong>Quick-fix solutions</strong>: Developer menggunakan jalan pintas agar permasalahan dapat diselesaikan secepat mungkin seiring dengan deadline project dengan mengekspos member secara global padahal hanya untuk beberapa abstraksi saja.</li></ul><h2 id="contoh-a-java-awt-point-dan-java-swing-text-sizerequirements" tabindex="-1">Contoh A: <code>java.awt.Point</code> dan <code>java.swing.text.SizeRequirements</code> <a class="header-anchor" href="#contoh-a-java-awt-point-dan-java-swing-text-sizerequirements" aria-label="Permalink to &quot;Contoh A: `java.awt.Point` dan `java.swing.text.SizeRequirements`&quot;">​</a></h2><h2 id="masalah" tabindex="-1">Masalah <a class="header-anchor" href="#masalah" aria-label="Permalink to &quot;Masalah&quot;">​</a></h2><p><img src="'+i+`" alt="Struktur class java.awt.Point" title="Struktur class java.awt.Point"></p><p>Dalam kasus <code>java.awt.Point</code>, terdapat 2 member variabel yang menggunakan access modifier public (yaitu <code>x</code> dan <code>y</code>) padahal sudah disertakan setter getter. Meski demikian, kasus tersebut tidak bisa direfactor paksa karena kasus tersebut tentunya berpengaruh besar terhadap developer-developer Java.</p><div class="language-java vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#6A737D;">/** The alignment, specified as a value between 0.0 and 1.0,</span></span>
<span class="line"><span style="color:#6A737D;">inclusive. To specify centering, the alignment should be 0.5. */</span></span>
<span class="line"><span style="color:#F97583;">public</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">float</span><span style="color:#E1E4E8;"> alignment;</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#6A737D;">/** The alignment, specified as a value between 0.0 and 1.0,</span></span>
<span class="line"><span style="color:#6A737D;">inclusive. To specify centering, the alignment should be 0.5. */</span></span>
<span class="line"><span style="color:#D73A49;">public</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">float</span><span style="color:#24292E;"> alignment;</span></span></code></pre></div>`,12),m=s("code",null,"java.awt.Point",-1),g=s("code",null,"java.swing.text",-1),h=s("code",null,"alignment",-1),b=n(`<h2 id="penyelesaian" tabindex="-1">Penyelesaian <a class="header-anchor" href="#penyelesaian" aria-label="Permalink to &quot;Penyelesaian&quot;">​</a></h2><p>Pada kasus yang riil, inputan lebih dari 1.0 dianggap variabel yang illegal sehingga perlu direfactor dengan mengubah access modifier <code>alignment</code> menjadi private, dan menambahkan method setter <em>(accessor)</em> dengan validasi dan getter <em>(mutator)</em>.</p><div class="language-java vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#6A737D;">/** The alignment, specified as a value between 0.0 and 1.0,</span></span>
<span class="line"><span style="color:#6A737D;">inclusive. To specify centering, the alignment should be 0.5. */</span></span>
<span class="line"><span style="color:#F97583;">private</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">float</span><span style="color:#E1E4E8;"> alignment;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583;">public</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">void</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">setAlignment</span><span style="color:#E1E4E8;">(</span><span style="color:#F97583;">float</span><span style="color:#E1E4E8;"> alignment) {</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#F97583;">if</span><span style="color:#E1E4E8;">(alignment </span><span style="color:#F97583;">&lt;</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">0</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">||</span><span style="color:#E1E4E8;"> alignment </span><span style="color:#F97583;">&gt;</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">1</span><span style="color:#E1E4E8;">) {</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#F97583;">throw</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">new</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">IllegalArgumentException</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&quot;alignment must be between 0.0 and 1.0&quot;</span><span style="color:#E1E4E8;">);</span></span>
<span class="line"><span style="color:#E1E4E8;">  }</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#79B8FF;">this</span><span style="color:#E1E4E8;">.alignment </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> alignment;</span></span>
<span class="line"><span style="color:#E1E4E8;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583;">public</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">float</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">getAlignment</span><span style="color:#E1E4E8;">() {</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#F97583;">return</span><span style="color:#E1E4E8;"> alignment;</span></span>
<span class="line"><span style="color:#E1E4E8;">}</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#6A737D;">/** The alignment, specified as a value between 0.0 and 1.0,</span></span>
<span class="line"><span style="color:#6A737D;">inclusive. To specify centering, the alignment should be 0.5. */</span></span>
<span class="line"><span style="color:#D73A49;">private</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">float</span><span style="color:#24292E;"> alignment;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D73A49;">public</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">void</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">setAlignment</span><span style="color:#24292E;">(</span><span style="color:#D73A49;">float</span><span style="color:#24292E;"> alignment) {</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#D73A49;">if</span><span style="color:#24292E;">(alignment </span><span style="color:#D73A49;">&lt;</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">0</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">||</span><span style="color:#24292E;"> alignment </span><span style="color:#D73A49;">&gt;</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">1</span><span style="color:#24292E;">) {</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#D73A49;">throw</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">new</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">IllegalArgumentException</span><span style="color:#24292E;">(</span><span style="color:#032F62;">&quot;alignment must be between 0.0 and 1.0&quot;</span><span style="color:#24292E;">);</span></span>
<span class="line"><span style="color:#24292E;">  }</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#005CC5;">this</span><span style="color:#24292E;">.alignment </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> alignment;</span></span>
<span class="line"><span style="color:#24292E;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D73A49;">public</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">float</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">getAlignment</span><span style="color:#24292E;">() {</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#D73A49;">return</span><span style="color:#24292E;"> alignment;</span></span>
<span class="line"><span style="color:#24292E;">}</span></span></code></pre></div>`,3),k=s("code",null,"alignment",-1),v=n(`<h2 id="contoh-b-testing-private-methods" tabindex="-1">Contoh B: Testing private methods <a class="header-anchor" href="#contoh-b-testing-private-methods" aria-label="Permalink to &quot;Contoh B: Testing private methods&quot;">​</a></h2><h2 id="masalah-1" tabindex="-1">Masalah <a class="header-anchor" href="#masalah-1" aria-label="Permalink to &quot;Masalah&quot;">​</a></h2><div class="language-java vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#F97583;">public</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">class</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">Foo</span><span style="color:#E1E4E8;"> {</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#6A737D;">// aslinya private method, diubah jadi public untuk testing</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#F97583;">private</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">int</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">bar</span><span style="color:#E1E4E8;">() {</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#F97583;">return</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">2</span><span style="color:#E1E4E8;">;</span></span>
<span class="line"><span style="color:#E1E4E8;">  }</span></span>
<span class="line"><span style="color:#E1E4E8;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583;">class</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">FooTest</span><span style="color:#E1E4E8;"> {</span></span>
<span class="line"><span style="color:#E1E4E8;">  @</span><span style="color:#F97583;">Test</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#F97583;">void</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">test</span><span style="color:#E1E4E8;">() {</span></span>
<span class="line"><span style="color:#E1E4E8;">    Foo f </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">new</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">Foo</span><span style="color:#E1E4E8;">();</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#B392F0;">assertEquals</span><span style="color:#E1E4E8;">(</span><span style="color:#79B8FF;">2</span><span style="color:#E1E4E8;">, f.</span><span style="color:#B392F0;">bar</span><span style="color:#E1E4E8;">());</span></span>
<span class="line"><span style="color:#E1E4E8;">  }</span></span>
<span class="line"><span style="color:#E1E4E8;">}</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#D73A49;">public</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">class</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">Foo</span><span style="color:#24292E;"> {</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#6A737D;">// aslinya private method, diubah jadi public untuk testing</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#D73A49;">private</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">int</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">bar</span><span style="color:#24292E;">() {</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#D73A49;">return</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">2</span><span style="color:#24292E;">;</span></span>
<span class="line"><span style="color:#24292E;">  }</span></span>
<span class="line"><span style="color:#24292E;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D73A49;">class</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">FooTest</span><span style="color:#24292E;"> {</span></span>
<span class="line"><span style="color:#24292E;">  @</span><span style="color:#D73A49;">Test</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#D73A49;">void</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">test</span><span style="color:#24292E;">() {</span></span>
<span class="line"><span style="color:#24292E;">    Foo f </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">new</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">Foo</span><span style="color:#24292E;">();</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#6F42C1;">assertEquals</span><span style="color:#24292E;">(</span><span style="color:#005CC5;">2</span><span style="color:#24292E;">, f.</span><span style="color:#6F42C1;">bar</span><span style="color:#24292E;">());</span></span>
<span class="line"><span style="color:#24292E;">  }</span></span>
<span class="line"><span style="color:#24292E;">}</span></span></code></pre></div><p>Dalam kasus B, disebutkan bahwa developer ingin menguji private method dengan mengubah access modifier <code>private</code> ke <code>public</code>. Hal ini memang ada maksud baik untuk mempermudah testing, padahal hal seperti itu dilarang keras dalam praktek Testing karena dapat membocorkan akses member ke abstraction lain. Fatalnya, abstraction lain dapat mempermainkan private method sesuka hati tanpa harus melakukan <em>message chaining</em> antar method abstraction dan berdampak fatal secara sistematis.</p><h2 id="penyelesaian-1" tabindex="-1">Penyelesaian <a class="header-anchor" href="#penyelesaian-1" aria-label="Permalink to &quot;Penyelesaian&quot;">​</a></h2><p>Salah satu jalan pintas untuk testing private method adalah dengan menggunakan teknik <strong><em>Reflector</em></strong> dalam package <code>java.lang.reflect</code> dimana method diubah accessnya untuk keperluan testing pada contoh <a href="testing_using_reflection/FooTest.java">test class</a> atau secara syntaxnya:</p><div class="language-java vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#F97583;">try</span><span style="color:#E1E4E8;"> {</span></span>
<span class="line"><span style="color:#E1E4E8;">  Method bar </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> f.</span><span style="color:#B392F0;">getClass</span><span style="color:#E1E4E8;">().</span><span style="color:#B392F0;">getDeclaredMethod</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&quot;bar&quot;</span><span style="color:#E1E4E8;">, </span><span style="color:#79B8FF;">null</span><span style="color:#E1E4E8;">);</span></span>
<span class="line"><span style="color:#E1E4E8;">  bar.</span><span style="color:#B392F0;">setAccessible</span><span style="color:#E1E4E8;">(</span><span style="color:#79B8FF;">true</span><span style="color:#E1E4E8;">);</span></span>
<span class="line"><span style="color:#E1E4E8;">  Object result </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> bar.</span><span style="color:#B392F0;">invoke</span><span style="color:#E1E4E8;">(f, </span><span style="color:#79B8FF;">null</span><span style="color:#E1E4E8;">);</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#B392F0;">assertEquals</span><span style="color:#E1E4E8;">(</span><span style="color:#79B8FF;">2</span><span style="color:#E1E4E8;">, result);</span></span>
<span class="line"><span style="color:#E1E4E8;">} </span><span style="color:#F97583;">catch</span><span style="color:#E1E4E8;">(Exception </span><span style="color:#FFAB70;">e</span><span style="color:#E1E4E8;">) {</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#B392F0;">fail</span><span style="color:#E1E4E8;">(e);</span></span>
<span class="line"><span style="color:#E1E4E8;">}</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#D73A49;">try</span><span style="color:#24292E;"> {</span></span>
<span class="line"><span style="color:#24292E;">  Method bar </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> f.</span><span style="color:#6F42C1;">getClass</span><span style="color:#24292E;">().</span><span style="color:#6F42C1;">getDeclaredMethod</span><span style="color:#24292E;">(</span><span style="color:#032F62;">&quot;bar&quot;</span><span style="color:#24292E;">, </span><span style="color:#005CC5;">null</span><span style="color:#24292E;">);</span></span>
<span class="line"><span style="color:#24292E;">  bar.</span><span style="color:#6F42C1;">setAccessible</span><span style="color:#24292E;">(</span><span style="color:#005CC5;">true</span><span style="color:#24292E;">);</span></span>
<span class="line"><span style="color:#24292E;">  Object result </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> bar.</span><span style="color:#6F42C1;">invoke</span><span style="color:#24292E;">(f, </span><span style="color:#005CC5;">null</span><span style="color:#24292E;">);</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#6F42C1;">assertEquals</span><span style="color:#24292E;">(</span><span style="color:#005CC5;">2</span><span style="color:#24292E;">, result);</span></span>
<span class="line"><span style="color:#24292E;">} </span><span style="color:#D73A49;">catch</span><span style="color:#24292E;">(Exception </span><span style="color:#E36209;">e</span><span style="color:#24292E;">) {</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#6F42C1;">fail</span><span style="color:#24292E;">(e);</span></span>
<span class="line"><span style="color:#24292E;">}</span></span></code></pre></div><p>Solusi tersebut merupakan salah satu cara agar private class tersebut dapat di-test dalam bahasa pemrograman Java.</p><h2 id="when-to-ignore" tabindex="-1">When to Ignore <a class="header-anchor" href="#when-to-ignore" aria-label="Permalink to &quot;When to Ignore&quot;">​</a></h2><ul><li>Jika global member tersebut dibuat dalam nested class atau anonymous class dimana member tersebut diakses kepada class tuan-nya.</li><li>Class tersebut dipakai untuk meningkatkan performa dan efisiensi dengan mengakses field langsung daripada melalui setter getter.</li></ul><h2 id="julukan-nama-lain" tabindex="-1">Julukan / Nama lain <a class="header-anchor" href="#julukan-nama-lain" aria-label="Permalink to &quot;Julukan / Nama lain&quot;">​</a></h2><ul><li><strong>Hideable public attributes/methods</strong>: Method/attribut global dapat disembunyikan</li><li><strong>Unencapsulated class</strong>: Class dibiarkan terekspos</li><li><strong>Class with unparameterized methods</strong>: Method tanpa parameter</li></ul>`,12);function F(f,_,A,C,D,j){const e=t("github-url");return r(),c("div",null,[E,d,u,s("p",null,[a("Selain kasus "),m,a(", terdapat juga class "),l(e,{to:"before/SizeRequirement.java"},{default:p(()=>[a("SizeRequirements")]),_:1}),a(" dari package "),g,a(" dimana pada variabel "),h,a(" dapat diakses dan diset nilainya langsung kepada variabel tersebut tanpa harus melalui validasi. Hal ini tentunya menimbulkan dampak fatal jika ada developer dengan *sengaja* menginput nilai sembarang.")]),b,s("p",null,[a("Hasilnya dalam package "),l(e,{to:"before/SizeRequirement.java"},{default:p(()=>[a("after")]),_:1}),a(" ketika user ingin melakukan input angka float alignment, user hanya bisa menginput alignment dari 0 hingga 1 sehingga menghindari adanya variable value mismatches dari variabel "),k,a(".")]),v])}const P=o(y,[["render",F]]);export{q as __pageData,P as default};
