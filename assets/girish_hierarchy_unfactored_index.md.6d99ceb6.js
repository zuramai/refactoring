import{_ as o,C as t,o as r,c as i,k as s,a,H as e,w as l,Q as p}from"./chunks/framework.1ff90abd.js";const P=JSON.parse('{"title":"Unfactored Hierarchy","description":"","frontmatter":{},"headers":[],"relativePath":"girish/hierarchy/unfactored/index.md","filePath":"girish/hierarchy/unfactored/index.md"}'),c={name:"girish/hierarchy/unfactored/index.md"},d=s("h1",{id:"unfactored-hierarchy",tabindex:"-1"},[a("Unfactored Hierarchy "),s("a",{class:"header-anchor",href:"#unfactored-hierarchy","aria-label":'Permalink to "Unfactored Hierarchy"'},"​")],-1),y=s("div",{class:"video-wrapper"},[s("iframe",{width:"560",height:"315",src:"https://www.youtube.com/embed/IJFO8YlSosc",title:"YouTube video player",frameborder:"0",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture",allowfullscreen:""})],-1),E=p('<p>Smell ini terjadi pada class-class dalam hierarki dimana terdapat bagian code yang duplikat. Duplikasi code bisa terjadi pada class yang bersaudaraan ataupun pada code-code yang mirip antar superclass dan subclass.</p><p>Terdapat 3 jenis smell yang terjadi pada hierarki yaitu:</p><ul><li><strong>Unfactored interface</strong>: Terdapat public method yang mempunyai kemiripan pada signature (parameter/return type) yang seharusnya dapat ditempatkan pada superclass.</li><li><strong>Unfactored implementation</strong>: Terdapat method yang mempunyai kemiripan pada implementasi/behaviour yang seharusnya dapat ditempatkan pada superclass.</li><li><strong>Unfactored interface and implementation</strong>: Terdapat method yang mempunyai kemiripan pada signature (parameter/return type) dan implementasi/behaviour yang seharusnya dapat ditempatkan pada superclass.</li></ul><h2 id="penyebab" tabindex="-1">Penyebab <a class="header-anchor" href="#penyebab" aria-label="Permalink to &quot;Penyebab&quot;">​</a></h2><ul><li><strong>Copying subtypes</strong>: Developer melakukan copy-paste isi method dari 1 subclass ke subclass lain karena dikejar deadline dan cepat selesai.</li><li><strong>Improper handling of outliers</strong>: Adanya masalah yang menyangkut hierarki dimana salah satu member class tidak menginginkan adanya method yang diturunkan dari parentnya (karena dikhawatirkan akan menimbulkan smell Rebellious Hierarchy), sehingga diselesaikan dengan melakukan copas isi method dari satu subclass ke subclass lain yang membutuhkannya.</li></ul><h2 id="penyelesaian" tabindex="-1">Penyelesaian <a class="header-anchor" href="#penyelesaian" aria-label="Permalink to &quot;Penyelesaian&quot;">​</a></h2><p>Jika masalah tersebut menyangkut adanya duplikat dari code-code antar class, terdapat 2 skeneario penyelesaian smell ini yaitu:</p><ul><li>Jika isi snippet code duplikat tersebut menyangkut minor behaviour pada beberapa class, disarankan untuk move/extract code snippet yang duplikat (terjadi antar subclass) ke method baru di class lain.</li><li>Jika isi snippet code duplikat tersebut mirip secara keseluruhan dapat dipindahkan ke superclass, lakukan <a href="https://sourcemaking.com/refactoring/pull-up-method" target="_blank" rel="noreferrer">pull-up method</a>/<a href="https://sourcemaking.com/refactoring/pull-up-field" target="_blank" rel="noreferrer">field</a> ke superclass agar dapat dijadikan method konkrit secara langsung.</li></ul><h2 id="contoh" tabindex="-1">Contoh <a class="header-anchor" href="#contoh" aria-label="Permalink to &quot;Contoh&quot;">​</a></h2><p>Salah satu masalah smell paling sederhana adalah masalah hierarki antar dua atau lebih subclass yang menyangkut 1 atau lebih method yang seharusnya dapat di-<em>pull up</em> (alias diimplementasikan abstract method di superclass) malah dibiarkan begitu saja dalam keadaan duplikat.</p>',10),u=s("code",null,"hit(int damage)",-1),m=p(`<div class="language-java vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#6A737D;">// Monster.java</span></span>
<span class="line"><span style="color:#E1E4E8;">@</span><span style="color:#F97583;">Override</span></span>
<span class="line"><span style="color:#F97583;">public</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">void</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">hit</span><span style="color:#E1E4E8;">(</span><span style="color:#F97583;">int</span><span style="color:#E1E4E8;"> damage) {</span></span>
<span class="line"><span style="color:#E1E4E8;">  health </span><span style="color:#F97583;">-=</span><span style="color:#E1E4E8;"> damage;</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#F97583;">if</span><span style="color:#E1E4E8;">(health </span><span style="color:#F97583;">&lt;=</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">0</span><span style="color:#E1E4E8;">) {</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#B392F0;">die</span><span style="color:#E1E4E8;">();</span></span>
<span class="line"><span style="color:#E1E4E8;">  }</span></span>
<span class="line"><span style="color:#E1E4E8;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;">// Player.java</span></span>
<span class="line"><span style="color:#E1E4E8;">@</span><span style="color:#F97583;">Override</span></span>
<span class="line"><span style="color:#F97583;">public</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">void</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">hit</span><span style="color:#E1E4E8;">(</span><span style="color:#F97583;">int</span><span style="color:#E1E4E8;"> damage) {</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#F97583;">double</span><span style="color:#E1E4E8;"> damageMultiplier </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> (</span><span style="color:#79B8FF;">1</span><span style="color:#F97583;">-</span><span style="color:#E1E4E8;">((</span><span style="color:#79B8FF;">0.052</span><span style="color:#F97583;">*</span><span style="color:#E1E4E8;">armor)</span><span style="color:#F97583;">/</span><span style="color:#E1E4E8;">(</span><span style="color:#79B8FF;">0.9</span><span style="color:#F97583;">+</span><span style="color:#79B8FF;">0.048</span><span style="color:#F97583;">*</span><span style="color:#E1E4E8;">Math.</span><span style="color:#B392F0;">abs</span><span style="color:#E1E4E8;">(armor))));</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#F97583;">if</span><span style="color:#E1E4E8;">(damageMultiplier </span><span style="color:#F97583;">&lt;</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">0</span><span style="color:#E1E4E8;">) damageMultiplier </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">0</span><span style="color:#E1E4E8;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8;">  health </span><span style="color:#F97583;">-=</span><span style="color:#E1E4E8;"> (damage </span><span style="color:#F97583;">*</span><span style="color:#E1E4E8;"> damageMultiplier);</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#F97583;">if</span><span style="color:#E1E4E8;">(health </span><span style="color:#F97583;">&lt;=</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">0</span><span style="color:#E1E4E8;">) {</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#B392F0;">die</span><span style="color:#E1E4E8;">();</span></span>
<span class="line"><span style="color:#E1E4E8;">  }</span></span>
<span class="line"><span style="color:#E1E4E8;">}</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#6A737D;">// Monster.java</span></span>
<span class="line"><span style="color:#24292E;">@</span><span style="color:#D73A49;">Override</span></span>
<span class="line"><span style="color:#D73A49;">public</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">void</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">hit</span><span style="color:#24292E;">(</span><span style="color:#D73A49;">int</span><span style="color:#24292E;"> damage) {</span></span>
<span class="line"><span style="color:#24292E;">  health </span><span style="color:#D73A49;">-=</span><span style="color:#24292E;"> damage;</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#D73A49;">if</span><span style="color:#24292E;">(health </span><span style="color:#D73A49;">&lt;=</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">0</span><span style="color:#24292E;">) {</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#6F42C1;">die</span><span style="color:#24292E;">();</span></span>
<span class="line"><span style="color:#24292E;">  }</span></span>
<span class="line"><span style="color:#24292E;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;">// Player.java</span></span>
<span class="line"><span style="color:#24292E;">@</span><span style="color:#D73A49;">Override</span></span>
<span class="line"><span style="color:#D73A49;">public</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">void</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">hit</span><span style="color:#24292E;">(</span><span style="color:#D73A49;">int</span><span style="color:#24292E;"> damage) {</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#D73A49;">double</span><span style="color:#24292E;"> damageMultiplier </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> (</span><span style="color:#005CC5;">1</span><span style="color:#D73A49;">-</span><span style="color:#24292E;">((</span><span style="color:#005CC5;">0.052</span><span style="color:#D73A49;">*</span><span style="color:#24292E;">armor)</span><span style="color:#D73A49;">/</span><span style="color:#24292E;">(</span><span style="color:#005CC5;">0.9</span><span style="color:#D73A49;">+</span><span style="color:#005CC5;">0.048</span><span style="color:#D73A49;">*</span><span style="color:#24292E;">Math.</span><span style="color:#6F42C1;">abs</span><span style="color:#24292E;">(armor))));</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#D73A49;">if</span><span style="color:#24292E;">(damageMultiplier </span><span style="color:#D73A49;">&lt;</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">0</span><span style="color:#24292E;">) damageMultiplier </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">0</span><span style="color:#24292E;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292E;">  health </span><span style="color:#D73A49;">-=</span><span style="color:#24292E;"> (damage </span><span style="color:#D73A49;">*</span><span style="color:#24292E;"> damageMultiplier);</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#D73A49;">if</span><span style="color:#24292E;">(health </span><span style="color:#D73A49;">&lt;=</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">0</span><span style="color:#24292E;">) {</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#6F42C1;">die</span><span style="color:#24292E;">();</span></span>
<span class="line"><span style="color:#24292E;">  }</span></span>
<span class="line"><span style="color:#24292E;">}</span></span></code></pre></div>`,1),h=s("code",null,"health -= damage",-1),g=s("code",null,"damage",-1),k=s("code",null,"reduceHealth(int damage)",-1),b=p(`<div class="language-java vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#F97583;">protected</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">void</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">reduceHealth</span><span style="color:#E1E4E8;">(</span><span style="color:#F97583;">int</span><span style="color:#E1E4E8;"> damage) {</span></span>
<span class="line"><span style="color:#E1E4E8;">  health </span><span style="color:#F97583;">-=</span><span style="color:#E1E4E8;"> damage;</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#F97583;">if</span><span style="color:#E1E4E8;">(health </span><span style="color:#F97583;">&lt;=</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">0</span><span style="color:#E1E4E8;">) {</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#B392F0;">die</span><span style="color:#E1E4E8;">();</span></span>
<span class="line"><span style="color:#E1E4E8;">  }</span></span>
<span class="line"><span style="color:#E1E4E8;">}</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#D73A49;">protected</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">void</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">reduceHealth</span><span style="color:#24292E;">(</span><span style="color:#D73A49;">int</span><span style="color:#24292E;"> damage) {</span></span>
<span class="line"><span style="color:#24292E;">  health </span><span style="color:#D73A49;">-=</span><span style="color:#24292E;"> damage;</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#D73A49;">if</span><span style="color:#24292E;">(health </span><span style="color:#D73A49;">&lt;=</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">0</span><span style="color:#24292E;">) {</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#6F42C1;">die</span><span style="color:#24292E;">();</span></span>
<span class="line"><span style="color:#24292E;">  }</span></span>
<span class="line"><span style="color:#24292E;">}</span></span></code></pre></div><p>Class baru bernama <code>GameUnit</code> akan menampung semua kebutuhan yang diperlukan pada entity-entity yang dapat dilibatkan dalam petempuran seperti class <code>Player</code> dan <code>Monster</code>. Entity-entity yang mempunyai behaviour health point dapat diextend dari abstract class <code>GameUnit</code> dimana abstract class tersebut mengimplementasikan interface <code>Hittable</code> (dari smell sebelumnya) sehingga subclass tidak perlu lagi mengimplementasikan interface <code>Hittable</code> ke subclass masing-masing.</p><h2 id="julukan" tabindex="-1">Julukan <a class="header-anchor" href="#julukan" aria-label="Permalink to &quot;Julukan&quot;">​</a></h2><ul><li><strong>Orphan sibling method/attribute</strong>: Terdapat member yang lebih dari 50% atau minimal 10 subclasses langsung, tanpa adanya penurunan/inheritance dan pemakaian abstract method atau overriding.</li><li><strong>Incomplete inheritance</strong>: Adanya kemiripan antar subclass dan sesaudaranya dimana isi dari implementasi tersebut hampir sama persis.</li><li><strong>Repeated functionality</strong>: Duplikat code yang terjadi pada 2 atau lebih class yang seharusnya dapat diabstrakkan.</li><li><strong>Redundant variable declaration</strong>: Ada subclass yang melakukan inheritance dengan jalan pintas ke base classnya.</li><li><strong>Significant sibling duplication</strong>: Adanya kesamaan yang mirip antar saudara-saudara subclassnya.</li></ul><h2 id="when-to-ignore" tabindex="-1">When to Ignore <a class="header-anchor" href="#when-to-ignore" aria-label="Permalink to &quot;When to Ignore&quot;">​</a></h2><p>Jika bahasa pemrograman tersebut tidak mendukung beberapa hal-hal yang dapat mempermudah programmer menyelesaikan masalah hierarki baik menyangkut multiple class inheritance (Java dan C#) dan Generic type class, maka smell ini terpaksa harus dibiarkan karena menyangkut adanya masalah support dalam bahasa pemrograman berbasis OOP.</p>`,6);function _(F,f,v,A,C,D){const n=t("github-url");return r(),i("div",null,[d,y,E,s("p",null,[a("Namun pada kasus hierarki class entity dan game system dimana class tersebut menyangkut adanya duplikasi code snippet antar class pada class "),e(n,{to:"before/Player.java"},{default:l(()=>[a("Monster.java")]),_:1}),a(" dan "),e(n,{to:"before/Player.java"},{default:l(()=>[a("Player.java")]),_:1}),a(" dimana terdapat kesamaan pada bagian code pada method implementasi "),u,a(" pada bagian berikut:")]),m,s("p",null,[a("Dimulai dari setting variabel "),h,a(" hingga validasi health point terjadi duplikat dimana terdapat kesamaan isi code kecuali pada pengurangan variabel dengan "),g,a(" yang berbeda pada kedua class. Kesamaan code tersebut jika ditunjukkan maka dapat diekstrak ke private method baru bernama "),k,a(" yang ditempatkan di abstract class baru bernama "),e(n,{to:"after/GameUnit.java"},{default:l(()=>[a("GameUnit.java")]),_:1})]),b])}const T=o(c,[["render",_]]);export{P as __pageData,T as default};
