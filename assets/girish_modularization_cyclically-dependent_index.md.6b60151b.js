import{_ as o,C as t,o as c,c as r,k as a,a as s,H as e,w as p,Q as n}from"./chunks/framework.6730c137.js";const i="/assets/cyclic-1.d80f96a5.png",y="/assets/cyclic-2.7f1f06ec.png",E="/assets/cyclic-3.df877829.png",N=JSON.parse('{"title":"Cyclically-dependent Modularization","description":"","frontmatter":{},"headers":[],"relativePath":"girish/modularization/cyclically-dependent/index.md","filePath":"girish/modularization/cyclically-dependent/index.md"}'),d={name:"girish/modularization/cyclically-dependent/index.md"},u=a("h1",{id:"cyclically-dependent-modularization",tabindex:"-1"},[s("Cyclically-dependent Modularization "),a("a",{class:"header-anchor",href:"#cyclically-dependent-modularization","aria-label":'Permalink to "Cyclically-dependent Modularization"'},"​")],-1),m=a("div",{class:"video-wrapper"},[a("iframe",{width:"560",height:"315",src:"https://www.youtube.com/embed/Xm5T75YZB0I",title:"YouTube video player",frameborder:"0",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture",allowfullscreen:""})],-1),g=n('<p><img src="'+i+'" alt="Graph of cyclic dependency" title="Graph of cyclic dependency"></p><p>Smell ini terjadi ketika dua atau lebih abstraction saling bergantung satu sama lain baik secara langsung maupun tidak langsung. Smell ini tentunya melanggar <a href="https://en.wikipedia.org/wiki/Acyclic_dependencies_principle" target="_blank" rel="noreferrer">Acyclic Dependencies Principle (ADP)</a>.</p><p>Smell ini tidak hanya terjadi secara langsung secara inheritence dan field member, namun juga secara tidak langsung secara variabel dalam method maupun secara parametrik. Dampak dari smell ini adalah keharusan sang developer untuk menjalankan, tes, dan modifikasi pasangan cyclic class secara bersamaan, yang bahayanya dapat berpotensi terjadinya <em>domino-effect</em> karena harus merubah class yang cyclic secara bersamaan atau dalam kasus fatalnya, bisa menjadi &quot;senjata makan tuan&quot; dari class pemanggil methodnya sendiri.</p><h2 id="penyebab" tabindex="-1">Penyebab <a class="header-anchor" href="#penyebab" aria-label="Permalink to &quot;Penyebab&quot;">​</a></h2><ul><li><strong>Improper responsibility realization</strong>: Adanya salah penempatan member abstraksi di abstraksi lain.</li><li><strong>Passing a self reference</strong>: Adanya passing dengan penggunaan <code>this</code> (reference dirinya) ketika melakukan passing referensi ke method dari abstraksi lain.</li><li><strong>Implementing call-back functionality</strong>: Adanya pemakaian call-back menimbulkan adanya dependensi cyclic antar class yang tidak diduga.</li><li><strong>Hard-to-visualize indirect dependencies</strong>: Dalam beberapa software kompleks, cukup sulit bagi developer untuk visualisasikan hubungan dependensi antar abstraksi sehingga menimbulkan perputaran dependensi antar abstraksi/class.</li></ul><h2 id="contoh" tabindex="-1">Contoh <a class="header-anchor" href="#contoh" aria-label="Permalink to &quot;Contoh&quot;">​</a></h2><h2 id="contoh-1-java-util-inter-abstractions-cyclic-interdepedency" tabindex="-1">Contoh 1: <code>java.util</code> inter-abstractions cyclic interdepedency <a class="header-anchor" href="#contoh-1-java-util-inter-abstractions-cyclic-interdepedency" aria-label="Permalink to &quot;Contoh 1: `java.util` inter-abstractions cyclic interdepedency&quot;">​</a></h2><p><img src="'+y+'" alt="Java interclass cyclic dependency" title="Java Date, Calendar, and TimeZone interclass cyclic dependency"></p><p>Dalam buku yang ditulis oleh Girish, Girish menyinggung package <code>java.util</code> yang berisikan 6 abstractions yang sangat kompleks dan sangat cyclic ketergantungan antar classnya. Class tersebut hampir semuanya saling bergantung satu sama lain.</p><p>Secara mendasar, Girish juga menuliskan catatan mengenai adanya potensi <em>domino-effect</em> karena adanya perubahan antar class ketika terdapat perubahan dalam satu abstraksi yang secara eksplisit dikutipkan sebagai berikut (hal 108-109, Chapter 5):</p><blockquote><p>In this design, any change to an abstraction involved in this dependency chain has the potential to affect other abstractions that depend on it, causing <strong>ripple effects or cascade of changes</strong>. A designer must, therefore, strive for designs that do not consist of tangles.</p></blockquote><p>Meski secara hierarki cukup sulit dalam memberantas adanya smell pada tingkat tinggi, apalagi pada level programming language API, namun kasus ini bisa dicegah dari bibit-bibitnya pada contoh kasus berikutnya.</p><h2 id="contoh-2-order-and-taxcalculator" tabindex="-1">Contoh 2: Order and TaxCalculator <a class="header-anchor" href="#contoh-2-order-and-taxcalculator" aria-label="Permalink to &quot;Contoh 2: Order and TaxCalculator&quot;">​</a></h2><p><img src="'+E+'" alt="Struktur class Order dan TaxCalculator" title="Cyclic dependency antara class Order dan TaxCalculator"></p>',14),h=a("a",{href:"before/TaxCalculator.java"},"TaxCalculator.java",-1),b=a("code",null,"Order",-1),k=a("code",null,"Item",-1),F=a("code",null,"Order",-1),A=a("code",null,"getAmount()",-1),C=a("code",null,"taxCal.computeAmount()",-1),_=a("code",null,"computeAmount()",-1),D=a("code",null,"Order",-1),f=a("code",null,"calculateTax()",-1),v=n(`<div class="language-java vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#6A737D;">// class Item</span></span>
<span class="line"><span style="color:#F97583;">public</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">double</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">getCost</span><span style="color:#E1E4E8;">() {</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#F97583;">return</span><span style="color:#E1E4E8;"> cost;</span></span>
<span class="line"><span style="color:#E1E4E8;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;">// class Order</span></span>
<span class="line"><span style="color:#F97583;">public</span><span style="color:#E1E4E8;"> Vector</span><span style="color:#F97583;">&lt;</span><span style="color:#E1E4E8;">Item</span><span style="color:#F97583;">&gt;</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">getItems</span><span style="color:#E1E4E8;">() {</span></span>
<span class="line"><span style="color:#E1E4E8;">  Vector&lt;</span><span style="color:#F97583;">Item</span><span style="color:#E1E4E8;">&gt; items </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">new</span><span style="color:#E1E4E8;"> Vector&lt;&gt;();</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#F97583;">for</span><span style="color:#E1E4E8;"> (Item item </span><span style="color:#F97583;">:</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">this</span><span style="color:#E1E4E8;">.items) {</span></span>
<span class="line"><span style="color:#E1E4E8;">    items.</span><span style="color:#B392F0;">add</span><span style="color:#E1E4E8;">(</span><span style="color:#F97583;">new</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">Item</span><span style="color:#E1E4E8;">(item.</span><span style="color:#B392F0;">getCost</span><span style="color:#E1E4E8;">()));</span></span>
<span class="line"><span style="color:#E1E4E8;">  }</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#F97583;">return</span><span style="color:#E1E4E8;"> items;</span></span>
<span class="line"><span style="color:#E1E4E8;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583;">public</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">double</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">getAmount</span><span style="color:#E1E4E8;">() {</span></span>
<span class="line"><span style="color:#E1E4E8;">  TaxCalculator calc </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">new</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">TaxCalculator</span><span style="color:#E1E4E8;">();</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#F97583;">return</span><span style="color:#E1E4E8;"> calc.</span><span style="color:#B392F0;">computeAmount</span><span style="color:#E1E4E8;">(</span><span style="color:#79B8FF;">this</span><span style="color:#E1E4E8;">);</span></span>
<span class="line"><span style="color:#E1E4E8;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;">// class TaxCalculator</span></span>
<span class="line"><span style="color:#F97583;">public</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">double</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">computeAmount</span><span style="color:#E1E4E8;">(Order order) {</span></span>
<span class="line"><span style="color:#E1E4E8;">  Vector&lt;</span><span style="color:#F97583;">Item</span><span style="color:#E1E4E8;">&gt; items </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> order.</span><span style="color:#B392F0;">getItems</span><span style="color:#E1E4E8;">();</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#F97583;">double</span><span style="color:#E1E4E8;"> amount </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">0</span><span style="color:#E1E4E8;">;</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#F97583;">for</span><span style="color:#E1E4E8;"> (Item item </span><span style="color:#F97583;">:</span><span style="color:#E1E4E8;"> items) {</span></span>
<span class="line"><span style="color:#E1E4E8;">    amount </span><span style="color:#F97583;">+=</span><span style="color:#E1E4E8;"> item.</span><span style="color:#B392F0;">getCost</span><span style="color:#E1E4E8;">();</span></span>
<span class="line"><span style="color:#E1E4E8;">  }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#F97583;">return</span><span style="color:#E1E4E8;"> amount </span><span style="color:#F97583;">+</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">calculateTax</span><span style="color:#E1E4E8;">(amount);</span></span>
<span class="line"><span style="color:#E1E4E8;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583;">private</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">double</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">calculateTax</span><span style="color:#E1E4E8;">(</span><span style="color:#F97583;">double</span><span style="color:#E1E4E8;"> amount) {</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#F97583;">return</span><span style="color:#E1E4E8;"> amount </span><span style="color:#F97583;">*</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">0.1</span><span style="color:#E1E4E8;">;</span></span>
<span class="line"><span style="color:#E1E4E8;">}</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#6A737D;">// class Item</span></span>
<span class="line"><span style="color:#D73A49;">public</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">double</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">getCost</span><span style="color:#24292E;">() {</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#D73A49;">return</span><span style="color:#24292E;"> cost;</span></span>
<span class="line"><span style="color:#24292E;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;">// class Order</span></span>
<span class="line"><span style="color:#D73A49;">public</span><span style="color:#24292E;"> Vector</span><span style="color:#D73A49;">&lt;</span><span style="color:#24292E;">Item</span><span style="color:#D73A49;">&gt;</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">getItems</span><span style="color:#24292E;">() {</span></span>
<span class="line"><span style="color:#24292E;">  Vector&lt;</span><span style="color:#D73A49;">Item</span><span style="color:#24292E;">&gt; items </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">new</span><span style="color:#24292E;"> Vector&lt;&gt;();</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#D73A49;">for</span><span style="color:#24292E;"> (Item item </span><span style="color:#D73A49;">:</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">this</span><span style="color:#24292E;">.items) {</span></span>
<span class="line"><span style="color:#24292E;">    items.</span><span style="color:#6F42C1;">add</span><span style="color:#24292E;">(</span><span style="color:#D73A49;">new</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">Item</span><span style="color:#24292E;">(item.</span><span style="color:#6F42C1;">getCost</span><span style="color:#24292E;">()));</span></span>
<span class="line"><span style="color:#24292E;">  }</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#D73A49;">return</span><span style="color:#24292E;"> items;</span></span>
<span class="line"><span style="color:#24292E;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D73A49;">public</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">double</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">getAmount</span><span style="color:#24292E;">() {</span></span>
<span class="line"><span style="color:#24292E;">  TaxCalculator calc </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">new</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">TaxCalculator</span><span style="color:#24292E;">();</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#D73A49;">return</span><span style="color:#24292E;"> calc.</span><span style="color:#6F42C1;">computeAmount</span><span style="color:#24292E;">(</span><span style="color:#005CC5;">this</span><span style="color:#24292E;">);</span></span>
<span class="line"><span style="color:#24292E;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;">// class TaxCalculator</span></span>
<span class="line"><span style="color:#D73A49;">public</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">double</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">computeAmount</span><span style="color:#24292E;">(Order order) {</span></span>
<span class="line"><span style="color:#24292E;">  Vector&lt;</span><span style="color:#D73A49;">Item</span><span style="color:#24292E;">&gt; items </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> order.</span><span style="color:#6F42C1;">getItems</span><span style="color:#24292E;">();</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#D73A49;">double</span><span style="color:#24292E;"> amount </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">0</span><span style="color:#24292E;">;</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#D73A49;">for</span><span style="color:#24292E;"> (Item item </span><span style="color:#D73A49;">:</span><span style="color:#24292E;"> items) {</span></span>
<span class="line"><span style="color:#24292E;">    amount </span><span style="color:#D73A49;">+=</span><span style="color:#24292E;"> item.</span><span style="color:#6F42C1;">getCost</span><span style="color:#24292E;">();</span></span>
<span class="line"><span style="color:#24292E;">  }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#D73A49;">return</span><span style="color:#24292E;"> amount </span><span style="color:#D73A49;">+</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">calculateTax</span><span style="color:#24292E;">(amount);</span></span>
<span class="line"><span style="color:#24292E;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D73A49;">private</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">double</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">calculateTax</span><span style="color:#24292E;">(</span><span style="color:#D73A49;">double</span><span style="color:#24292E;"> amount) {</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#D73A49;">return</span><span style="color:#24292E;"> amount </span><span style="color:#D73A49;">*</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">0.1</span><span style="color:#24292E;">;</span></span>
<span class="line"><span style="color:#24292E;">}</span></span></code></pre></div><p>Secara tidak langsung, pemanggilan method <code>getAmount()</code> dari class <code>Order</code> secara tidak langsung menyebabkan adanya cyclic dependency yang menyebabkan ketergantungan yang berputar-putar. Selain itu, method dalam class ini dicurigai mempunyai smell lain yaitu <a href="./../../../martin-fowler/couplers/feature-envy/">Feature Envy</a> dimana method ini hanya mengakses value dari class lain dan secara multidimensional, smell ini terjadi bagaikan lingkaran setan dimana terjadi <em>adu colong sandal</em> antar class sehingga rawan terjadi error karena pasangan class tersebut harus dijalankan, dites, dan diubah bersamaan.</p><h2 id="penyelesaian" tabindex="-1">Penyelesaian <a class="header-anchor" href="#penyelesaian" aria-label="Permalink to &quot;Penyelesaian&quot;">​</a></h2><p>Untuk mencegah terjadinya cyclic depedency, ada berbagai cara untuk menyelesaikan kejadian smell ini yaitu:</p><ul><li><a href="https://refactoring.guru/extract-interface" target="_blank" rel="noreferrer">Introduce/Extract Interface</a></li><li>Breaking cyclic by removing a Dependency</li><li><a href="https://refactoring.guru/extract-class" target="_blank" rel="noreferrer">Introduce/Extract to another abstraction</a></li><li><a href="https://refactoring.guru/inline-class" target="_blank" rel="noreferrer">Merging/Inline the abstractions</a></li></ul><p>Pada kasus class <code>Order</code> dan <code>TaxCalculator</code>, diketahui bahwa terdapat method <code>computeAmount()</code> yang sebetulnya dapat ditempatkan di class <code>Order</code> sehingga class <code>TaxCalculator</code> cukup mengkalkulasikan pajak dari total transaksi keseluruhan.</p><div class="language-java vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#6A737D;">// class Item</span></span>
<span class="line"><span style="color:#F97583;">public</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">double</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">getCost</span><span style="color:#E1E4E8;">() {</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#F97583;">return</span><span style="color:#E1E4E8;"> cost;</span></span>
<span class="line"><span style="color:#E1E4E8;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;">// class Order</span></span>
<span class="line"><span style="color:#F97583;">public</span><span style="color:#E1E4E8;"> Vector</span><span style="color:#F97583;">&lt;</span><span style="color:#E1E4E8;">Item</span><span style="color:#F97583;">&gt;</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">getItems</span><span style="color:#E1E4E8;">() {</span></span>
<span class="line"><span style="color:#E1E4E8;">  Vector&lt;</span><span style="color:#F97583;">Item</span><span style="color:#E1E4E8;">&gt; items </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">new</span><span style="color:#E1E4E8;"> Vector&lt;&gt;();</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#F97583;">for</span><span style="color:#E1E4E8;"> (Item item </span><span style="color:#F97583;">:</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">this</span><span style="color:#E1E4E8;">.items) {</span></span>
<span class="line"><span style="color:#E1E4E8;">    items.</span><span style="color:#B392F0;">add</span><span style="color:#E1E4E8;">(</span><span style="color:#F97583;">new</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">Item</span><span style="color:#E1E4E8;">(item.</span><span style="color:#B392F0;">getCost</span><span style="color:#E1E4E8;">()));</span></span>
<span class="line"><span style="color:#E1E4E8;">  }</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#F97583;">return</span><span style="color:#E1E4E8;"> items;</span></span>
<span class="line"><span style="color:#E1E4E8;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583;">public</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">double</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">getAmount</span><span style="color:#E1E4E8;">() {</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#F97583;">return</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">computeAmount</span><span style="color:#E1E4E8;">() </span><span style="color:#F97583;">+</span><span style="color:#E1E4E8;"> calc.</span><span style="color:#B392F0;">calculateTax</span><span style="color:#E1E4E8;">(amount);</span></span>
<span class="line"><span style="color:#E1E4E8;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583;">private</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">double</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">computeAmount</span><span style="color:#E1E4E8;">() {</span></span>
<span class="line"><span style="color:#E1E4E8;">  TaxCalculator calc </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">new</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">TaxCalculator</span><span style="color:#E1E4E8;">();</span></span>
<span class="line"><span style="color:#E1E4E8;">  Vector&lt;</span><span style="color:#F97583;">Item</span><span style="color:#E1E4E8;">&gt; items </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">getItems</span><span style="color:#E1E4E8;">();</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#F97583;">double</span><span style="color:#E1E4E8;"> amount </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">0</span><span style="color:#E1E4E8;">;</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#F97583;">for</span><span style="color:#E1E4E8;"> (Item item </span><span style="color:#F97583;">:</span><span style="color:#E1E4E8;"> items) {</span></span>
<span class="line"><span style="color:#E1E4E8;">    amount </span><span style="color:#F97583;">+=</span><span style="color:#E1E4E8;"> item.</span><span style="color:#B392F0;">getCost</span><span style="color:#E1E4E8;">();</span></span>
<span class="line"><span style="color:#E1E4E8;">  }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#F97583;">return</span><span style="color:#E1E4E8;"> amount;</span></span>
<span class="line"><span style="color:#E1E4E8;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;">// class TaxCalculator</span></span>
<span class="line"><span style="color:#F97583;">private</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">double</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">calculateTax</span><span style="color:#E1E4E8;">(</span><span style="color:#F97583;">double</span><span style="color:#E1E4E8;"> amount) {</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#F97583;">return</span><span style="color:#E1E4E8;"> amount </span><span style="color:#F97583;">*</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">0.1</span><span style="color:#E1E4E8;">;</span></span>
<span class="line"><span style="color:#E1E4E8;">}</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#6A737D;">// class Item</span></span>
<span class="line"><span style="color:#D73A49;">public</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">double</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">getCost</span><span style="color:#24292E;">() {</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#D73A49;">return</span><span style="color:#24292E;"> cost;</span></span>
<span class="line"><span style="color:#24292E;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;">// class Order</span></span>
<span class="line"><span style="color:#D73A49;">public</span><span style="color:#24292E;"> Vector</span><span style="color:#D73A49;">&lt;</span><span style="color:#24292E;">Item</span><span style="color:#D73A49;">&gt;</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">getItems</span><span style="color:#24292E;">() {</span></span>
<span class="line"><span style="color:#24292E;">  Vector&lt;</span><span style="color:#D73A49;">Item</span><span style="color:#24292E;">&gt; items </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">new</span><span style="color:#24292E;"> Vector&lt;&gt;();</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#D73A49;">for</span><span style="color:#24292E;"> (Item item </span><span style="color:#D73A49;">:</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">this</span><span style="color:#24292E;">.items) {</span></span>
<span class="line"><span style="color:#24292E;">    items.</span><span style="color:#6F42C1;">add</span><span style="color:#24292E;">(</span><span style="color:#D73A49;">new</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">Item</span><span style="color:#24292E;">(item.</span><span style="color:#6F42C1;">getCost</span><span style="color:#24292E;">()));</span></span>
<span class="line"><span style="color:#24292E;">  }</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#D73A49;">return</span><span style="color:#24292E;"> items;</span></span>
<span class="line"><span style="color:#24292E;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D73A49;">public</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">double</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">getAmount</span><span style="color:#24292E;">() {</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#D73A49;">return</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">computeAmount</span><span style="color:#24292E;">() </span><span style="color:#D73A49;">+</span><span style="color:#24292E;"> calc.</span><span style="color:#6F42C1;">calculateTax</span><span style="color:#24292E;">(amount);</span></span>
<span class="line"><span style="color:#24292E;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D73A49;">private</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">double</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">computeAmount</span><span style="color:#24292E;">() {</span></span>
<span class="line"><span style="color:#24292E;">  TaxCalculator calc </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">new</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">TaxCalculator</span><span style="color:#24292E;">();</span></span>
<span class="line"><span style="color:#24292E;">  Vector&lt;</span><span style="color:#D73A49;">Item</span><span style="color:#24292E;">&gt; items </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">getItems</span><span style="color:#24292E;">();</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#D73A49;">double</span><span style="color:#24292E;"> amount </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">0</span><span style="color:#24292E;">;</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#D73A49;">for</span><span style="color:#24292E;"> (Item item </span><span style="color:#D73A49;">:</span><span style="color:#24292E;"> items) {</span></span>
<span class="line"><span style="color:#24292E;">    amount </span><span style="color:#D73A49;">+=</span><span style="color:#24292E;"> item.</span><span style="color:#6F42C1;">getCost</span><span style="color:#24292E;">();</span></span>
<span class="line"><span style="color:#24292E;">  }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#D73A49;">return</span><span style="color:#24292E;"> amount;</span></span>
<span class="line"><span style="color:#24292E;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;">// class TaxCalculator</span></span>
<span class="line"><span style="color:#D73A49;">private</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">double</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">calculateTax</span><span style="color:#24292E;">(</span><span style="color:#D73A49;">double</span><span style="color:#24292E;"> amount) {</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#D73A49;">return</span><span style="color:#24292E;"> amount </span><span style="color:#D73A49;">*</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">0.1</span><span style="color:#24292E;">;</span></span>
<span class="line"><span style="color:#24292E;">}</span></span></code></pre></div>`,7),x=a("code",null,"computeAmount()",-1),I=a("code",null,"Order",-1),T=a("code",null,"TaxCalculator",-1),j=a("code",null,"Order",-1),B=n('<h2 id="when-to-ignore" tabindex="-1">When to Ignore <a class="header-anchor" href="#when-to-ignore" aria-label="Permalink to &quot;When to Ignore&quot;">​</a></h2><p>Pada kasus <strong>Unit cycles between conceptually related abstractions</strong>, terutama pada kasus class <code>java.util.regex</code>, terdapat 2 class yang saling bertukar peran dan saling bergantung satu sama lain yaitu class <code>Matcher</code> dan <code>Pattern</code>. Dalam kasus tersebut, kedua class memang diciptakan terpisah namun terpakai berbarengan. Meski praktik ini tepat untuk diterapkan, namun dalam beberapa kasus tertentu, terutama pada skala besar, class tetap harus dibagi untuk mencegah adanya masalah yang lebih kompleks.</p><h2 id="referensi" tabindex="-1">Referensi <a class="header-anchor" href="#referensi" aria-label="Permalink to &quot;Referensi&quot;">​</a></h2><ul><li>Paul C. Jorgensen, &quot;Software Testing: A Craftsman&#39;s Approach, Third Edition&quot;, Bab 9, Hal 139-146. CRC Press. 2013.</li><li>Brian Mearns, &quot;Circular Dependencies in Dependency Injection,&quot; 11 Apr 2018. Medium. Available at <a href="https://medium.com/software-ascending/circular-dependencies-in-dependency-injection-403b790daebb" target="_blank" rel="noreferrer">https://medium.com/software-ascending/circular-dependencies-in-dependency-injection-403b790daebb</a></li></ul>',4);function w(P,V,O,q,S,z){const l=t("github-url");return c(),r("div",null,[u,m,g,a("p",null,[s("Pada kasus class "),e(l,{to:"before/Item.java"},{default:p(()=>[s("Order.java](before/Order.java), "),h,s(", dan [Item.java")]),_:1}),s(", terdapat perputaran dependensi antar class. Member field class "),b,s(" terdiri dari (composed of) beberapa "),k,s(", namun pada class "),F,s(", terdapat method "),A,s(" dimana dalam isi methodnya melakukan return "),C,s(". Pada method "),_,s(", class tersebut mengambil semua item dalam class "),D,s(" dan menghitung jumlah pajak dari transaksi order dengan memanggil method "),f,s(" untuk kemudian ditotalkan dengan transaksi order tersebut dan di-return.")]),v,a("p",null,[s("Sebagai gantinya, kita dapat memindahkan method "),x,s(" dari class TaxCalculator ke Order sehingga class "),e(l,{to:"after/TaxCalculator.java"},{default:p(()=>[s("TaxCalculator.java](after/Order.java) tidak perlu bergantung pada [Order.java")]),_:1}),s(" untuk mengambil data-data dari Order dan semua kalkulasi biaya cukup dilakukan dari class "),I,s(" dan class "),T,s(" cukup mengkalkulasikan berbagai jenis pajak yang akan diaplikasikan kepada total biaya dari class "),j,s(".")]),B])}const R=o(d,[["render",w]]);export{N as __pageData,R as default};
